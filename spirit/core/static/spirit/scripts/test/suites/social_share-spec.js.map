{"version":3,"file":"social_share-spec.js","sources":["social_share-spec.coffee"],"names":[],"mappings":"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","sourcesContent":["describe \"social-share plugin tests\", ->\n    social_share = null\n\n    isHidden = stModules.utils.isHidden\n\n    beforeEach ->\n        fixtures = jasmine.getFixtures()\n        fixtures.fixturesPath = 'base/test/fixtures/'\n        loadFixtures('social_share.html')\n\n        social_share = document.querySelectorAll('.js-share')\n        stModules.socialShare(social_share)\n\n    it \"shows the share dialog\", ->\n        expect(isHidden([document.querySelector('.test-1')])).toEqual(true)\n        social_share[0].click()\n        expect(isHidden([document.querySelector('.test-1')])).toEqual(false)\n        expect(isHidden([document.querySelector('.test-2')])).toEqual(true)\n\n        social_share[1].click()\n        expect(isHidden([document.querySelector('.test-1')])).toEqual(true)\n        expect(isHidden([document.querySelector('.test-2')])).toEqual(false)\n\n    it \"prevents the default click behaviour on share click\", ->\n        evt = document.createEvent(\"HTMLEvents\")\n        evt.initEvent(\"click\", false, true)\n\n        stopPropagation = spyOn(evt, 'stopPropagation')\n        preventDefault = spyOn(evt, 'preventDefault')\n\n        social_share[0].dispatchEvent(evt)\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n\n    it \"closes the dialog\", ->\n        social_share[0].click()\n        expect(isHidden([document.querySelector('.test-1')])).toEqual(false)\n\n        document.querySelector('.test-1').querySelector('.share-close').click()\n        expect(isHidden([document.querySelector('.test-1')])).toEqual(true)\n\n    it \"prevents the default click behaviour on close dialog\", ->\n        evt = document.createEvent(\"HTMLEvents\")\n        evt.initEvent(\"click\", false, true)\n\n        stopPropagation = spyOn(evt, 'stopPropagation')\n        preventDefault = spyOn(evt, 'preventDefault')\n\n        document.querySelector('.test-1').querySelector('.share-close').dispatchEvent(evt)\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n\n    it \"auto selects the share link on focus\", ->\n        social_share[0].click()\n        shareInput = document.querySelector('.test-1').querySelector('.share-url')\n        shareInput.focus()\n\n        #selection = $shareInput.val().substring $shareInput[0].selectionStart, $shareInput[0].selectionEnd\n\n        #expect(selection).toEqual \"link\"\n        #TODO: test, override SocialShare.select\n\n    it \"prevents the default behaviour on input mouseup\", ->\n        evt = document.createEvent(\"HTMLEvents\")\n        evt.initEvent(\"mouseup\", false, true)\n\n        stopPropagation = spyOn(evt, 'stopPropagation')\n        preventDefault = spyOn(evt, 'preventDefault')\n\n        document.querySelector('.test-1').querySelector('.share-url').dispatchEvent(evt)\n        expect(stopPropagation).toHaveBeenCalled()\n        expect(preventDefault).toHaveBeenCalled()\n"]}